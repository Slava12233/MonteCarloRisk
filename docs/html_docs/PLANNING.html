
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Google ADK Agent Starter Kit - Architecture & Planning - MonteCarloRisk_AI</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                mermaid.initialize({
                    startOnLoad: true,
                    theme: 'default',
                    securityLevel: 'loose',
                    flowchart: { useMaxWidth: false }
                });
            });
        </script>
    </head>
    <body>
        <div class="navbar">
            <h1>MonteCarloRisk_AI</h1>
            <p><a href="index.html" style="color: white;">← Back to Documentation Index</a></p>
        </div>
        
        <h1 id="google-adk-agent-starter-kit-architecture-planning">Google ADK Agent Starter Kit - Architecture &amp; Planning</h1>
<h2 id="overview">Overview</h2>
<p>This document outlines the architecture, design decisions, and roadmap for the Google ADK Agent Starter Kit. It serves as a consolidated reference for developers working on or with the project.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#component-relationships">Component Relationships</a></li>
<li><a href="#design-decisions">Design Decisions</a></li>
<li><a href="#extension-points">Extension Points</a></li>
<li><a href="#development-roadmap">Development Roadmap</a></li>
<li><a href="#deployment-strategies">Deployment Strategies</a></li>
</ol>
<h2 id="architecture">Architecture</h2>
<p>The Google ADK Agent Starter Kit follows a modular architecture designed for extensibility and maintainability. The key components of the architecture are:</p>
<h3 id="core-components">Core Components</h3>
<ol>
<li><strong>BaseAgent</strong>: The foundational agent class that inherits from Google ADK's BaseAgent and implements custom orchestration logic.</li>
<li><strong>Tool System</strong>: A framework for creating and using custom tools that agents can leverage.</li>
<li><strong>Registry</strong>: A dynamic registry system for registering and retrieving agent types.</li>
<li><strong>Configuration</strong>: Centralized configuration management supporting environment-specific settings.</li>
<li><strong>CLI</strong>: Command-line interface for running and interacting with agents.</li>
</ol>
<h3 id="deployment-components">Deployment Components</h3>
<ol>
<li><strong>Local Deployment</strong>: Utilities for running agents locally with a web interface.</li>
<li><strong>Vertex AI Deployment</strong>: Utilities for deploying agents to Vertex AI Agent Engine.</li>
</ol>
<h2 id="component-relationships">Component Relationships</h2>
<div class="codehilite"><pre><span></span><code>┌────────────┐         ┌─────────────┐         ┌────────────┐
│   CLI      │─────────▶   Registry  │─────────▶  BaseAgent │
└────────────┘         └─────────────┘         └────────────┘
                             │                        │
                             ▼                        ▼
                       ┌─────────────┐         ┌────────────┐
                       │  Config     │         │   Tools    │
                       └─────────────┘         └────────────┘
                             │                        │
                             ▼                        ▼
                       ┌─────────────┐         ┌────────────┐
                       │ Deployment  │◀────────▶   Session  │
                       └─────────────┘         └────────────┘
</code></pre></div>

<p>The CLI interfaces with the Registry to create agents of different types. The Registry instantiates the BaseAgent, which uses Tools and Config components. The Deployment system handles deploying agents locally or to Vertex AI. Session management is handled by both BaseAgent and Deployment components.</p>
<h2 id="design-decisions">Design Decisions</h2>
<h3 id="1-true-custom-agent-architecture">1. True Custom Agent Architecture</h3>
<p>We've chosen to implement a true custom agent architecture by inheriting directly from Google's BaseAgent class, rather than using a higher-level abstraction. This gives us maximum flexibility and control over the agent's behavior.</p>
<h3 id="2-single-baseagent-with-dynamic-tools">2. Single BaseAgent with Dynamic Tools</h3>
<p>Instead of creating separate agent classes for different functionality (e.g., SearchAgent), we've adopted a single BaseAgent class that can be configured with different tools. This simplifies the codebase and makes it easier to extend.</p>
<h3 id="3-pydantic-integration-approach">3. Pydantic Integration Approach</h3>
<p>We've adopted a hybrid approach for Pydantic integration:</p>
<ul>
<li>Using <code>model_config = {"arbitrary_types_allowed": True}</code> to allow non-Pydantic types</li>
<li>Implementing validation methods (<code>_validate_model()</code>, <code>_validate_tools()</code>) for explicit input validation</li>
<li>Using private attributes (with leading underscores) to store parameters</li>
</ul>
<p>This approach balances type safety with flexibility and compatibility with the ADK.</p>
<h3 id="4-environment-specific-configuration">4. Environment-Specific Configuration</h3>
<p>We've implemented a configuration system that supports environment-specific overrides (development, staging, production). This allows for different settings in different environments without changing the code.</p>
<h3 id="5-deployment-strategy">5. Deployment Strategy</h3>
<p>We've focused on Vertex AI Agent Engine as the primary deployment target, as it provides the most optimized environment for AI agents, including session management, scaling, and monitoring.</p>
<h2 id="extension-points">Extension Points</h2>
<p>The starter kit is designed to be extended in several ways:</p>
<h3 id="1-custom-agent-types">1. Custom Agent Types</h3>
<p>New agent types can be created by implementing a factory function and registering it with the Registry:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.registry</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_agent_type</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">src.agents.base_agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseAgent</span>

<span class="k">def</span><span class="w"> </span><span class="nf">_create_my_agent</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># Create and configure the agent</span>
    <span class="k">return</span> <span class="n">BaseAgent</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">my_custom_tool</span><span class="p">])</span>

<span class="c1"># Register the agent type</span>
<span class="n">register_agent_type</span><span class="p">(</span><span class="s2">&quot;my_agent&quot;</span><span class="p">,</span> <span class="n">_create_my_agent</span><span class="p">)</span>
</code></pre></div>

<h3 id="2-custom-tools">2. Custom Tools</h3>
<p>New tools can be created using the CustomTool class or the create_custom_tool function:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.tools.custom_tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_custom_tool</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_weather</span><span class="p">(</span><span class="n">location</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">units</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;metric&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current weather for a location.&quot;&quot;&quot;</span>
    <span class="c1"># Implementation...</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;The weather in </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2"> is sunny and 25°C.&quot;</span>

<span class="n">weather_tool</span> <span class="o">=</span> <span class="n">create_custom_tool</span><span class="p">(</span><span class="n">get_weather</span><span class="p">)</span>
</code></pre></div>

<h3 id="3-custom-deployment">3. Custom Deployment</h3>
<p>New deployment methods can be added by implementing a deployment function in the deployment module.</p>
<h2 id="development-roadmap">Development Roadmap</h2>
<h3 id="current-priorities">Current Priorities</h3>
<ol>
<li><strong>Improve Deployment Experience</strong>: Enhance the deployment process to make it more robust and user-friendly.</li>
<li><strong>Add More Examples</strong>: Create more example agents to demonstrate different use cases.</li>
<li><strong>Enhance Documentation</strong>: Expand and improve documentation, especially for new developers.</li>
</ol>
<h3 id="upcoming-features">Upcoming Features</h3>
<ol>
<li><strong>Agent Monitoring</strong>: Add monitoring capabilities to track agent performance and usage.</li>
<li><strong>Multi-Agent Orchestration</strong>: Add support for orchestrating multiple agents.</li>
<li><strong>Tool Library</strong>: Expand the tool library with more useful tools.</li>
<li><strong>Web UI Improvements</strong>: Enhance the web UI for better user experience.</li>
</ol>
<h2 id="deployment-strategies">Deployment Strategies</h2>
<h3 id="development">Development</h3>
<p>For development, we recommend running the agent locally using the CLI's <code>run</code> command with the <code>--web</code> flag:</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>run.py<span class="w"> </span>run<span class="w"> </span>base<span class="w"> </span>--web<span class="w"> </span>--port<span class="w"> </span><span class="m">8000</span>
</code></pre></div>

<h3 id="testing">Testing</h3>
<p>Before deploying to production, we recommend deploying to a staging environment:</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>deploy_agent_engine.py<span class="w"> </span>--environment<span class="w"> </span>staging<span class="w"> </span>--staging-bucket<span class="w"> </span>gs://your-staging-bucket
</code></pre></div>

<h3 id="production">Production</h3>
<p>For production deployments, we recommend using the production environment configuration:</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>deploy_agent_engine.py<span class="w"> </span>--environment<span class="w"> </span>production<span class="w"> </span>--staging-bucket<span class="w"> </span>gs://your-production-bucket
</code></pre></div>

<h3 id="interacting-with-deployed-agents">Interacting with Deployed Agents</h3>
<p>Deployed agents can be interacted with using the <code>chat.py</code> script, which uses the Vertex AI SDK:</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>chat.py
</code></pre></div>

<hr />
<p><em>Document Version: 1.0</em><br />
<em>Last Updated: April 22, 2025</em><br />
<em>Author: CTO, AI Agents Company</em> </p>
        
        <div class="footer">
            <p>Generated on 2025-04-21 09:00:32</p>
            <p><a href="index.html">Back to Documentation Index</a></p>
        </div>
    </body>
    </html>
    